webpackJsonp([1],{EfDh:function(t,e){},FNpM:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("7+uW"),a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var n=s("VU/8")({name:"App"},a,!1,function(t){s("FNpM")},null,null).exports,r=s("/ocq"),o=s("Lw6n"),c="#6ABF8B",l=new(s.n(o).a);console.log(l);var u={name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App",width:250,height:250,downtime:5,wztip:"请正视手机<br>保持禁止不动",eventtype:"init",pass:!1,stopcircle:!1,iswarn:!1,successstatus:0}},created:function(){},mounted:function(){window.brfv4Example.start(),window.brfv4Example.callback=this.brfv4callback},methods:{successback:function(t){2===this.successstatus?(console.log("第二次通过啦"),this.pass=!0,this.stopcircle=!0,window.brfv4Example.stopCheckImg=!0,this.wztip="",setTimeout(function(){window.brfv4Example.imageData.webcam.stopStream(),window.brfv4Example.stop()},1e3)):(c="#6ABF8B",this.successstatus+=1,this.setwztip(t),window.brfv4Example.stopCheckImg=!1,this.setTimeout&&clearTimeout(this.setTimeout),this.downtime=5,1===t&&(this.downtime=5),this.countdown())},errorcallback:function(){this.successstatus>=2||(c="#DC2F3E",this.wztip="未通过验证，请重试",this.stopcircle=!0,this.iswarn=!0,window.brfv4Example.imageData.webcam.stopStream(),window.brfv4Example.stop())},brfv4callback:function(t,e,s){this.eventtype=t,"init"===t?this.countdown():(console.log("status。。。。。。。",t+"..."+e+"....."+s),"error"===e?this.errorcallback():this.successback(s))},setwztip:function(t){1===t?this.wztip="请正视手机<br>左右摇头":2===t?this.wztip="请正视手机<br>张开嘴":3===t&&(this.wztip="请正视手机<br>眨一眨眼")},countdown:function(){var t=this;this.setTimeout=setTimeout(function(){0===t.downtime?window.brfv4Example.stopCheckImg=!0:(t.downtime-=1,t.downtime<3&&(window.brfv4Example.stopCheckImg="passtime"),t.countdown())},1e3)},drawCanvas:function(){var t=this,e=0,s=document.getElementById("process").getContext("2d");!function i(){requestAnimationFrame(function(){(function(e,s){e.beginPath(),e.moveTo(t.width/2,t.height/2),e.arc(t.width/2,t.height/2,t.width/2,1.5*Math.PI,Math.PI*(1.5+2*s/100)),e.closePath(),e.fillStyle=c,e.fill(),e.beginPath(),e.arc(t.width/2,t.height/2,t.width/2-5,0,2*Math.PI),e.closePath(),e.fillStyle="#fff",e.fill()})(s,e+=1),100!==e||t.stopcircle||(s.fillStyle="#fff",s.beginPath(),s.fillRect(0,0,t.width,t.height),s.closePath(),s.beginPath(),s.arc(t.width/2,t.height/2,t.width/2,0,2*Math.PI),s.closePath(),s.fillStyle="#f6f6f6",s.fill(),e=1),i()})}()}}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"_wrapper"}},[s("div",{staticStyle:{"“margin-top":"30%”"}},[s("div",{staticClass:"cirqueBox"},[s("div",{staticClass:"cirqueRed",class:{warn:t.iswarn}}),t._v(" "),t.stopcircle?t._e():s("div",{staticClass:"cirqueGrey"})]),t._v(" "),t._m(0)]),t._v(" "),s("p",{staticClass:"wz-tip",class:{warn:t.iswarn},domProps:{innerHTML:t._s(t.wztip)}}),t._v(" "),t.iswarn||t.stopcircle?t._e():s("p",{staticClass:"time-return"},[t._v(t._s(t.downtime))]),t._v(" "),t.pass?s("p",[t._v("检验通过")]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"drawcanvas"},[e("video",{attrs:{id:"_webcam",playsinline:""}}),this._v(" "),e("canvas",{attrs:{id:"_imageData",width:"320",height:"240"}}),this._v(" "),e("canvas",{attrs:{id:"_faceSub"}}),this._v(" "),e("canvas",{attrs:{id:"_t3d"}}),this._v(" "),e("canvas",{attrs:{id:"_f3d"}}),this._v(" "),e("canvas",{attrs:{id:"_drawing"}}),this._v(" "),e("div",{attrs:{id:"_stats"}})])}]};var d=s("VU/8")(u,h,!1,function(t){s("bceb")},"data-v-c14d8c12",null).exports,p=s("DWsy"),f=s.n(p),w={name:"HelloWorld",data:function(){return{Authorization:"",formdata:null,status:{ok:"真人",hack:"假造人脸",short_time:"视频时长不足2s",no_face_detected:"视频中未检测到人脸",loss_tracking:"人脸中途出框",face_changed:"视频中途人脸被替换"},liveness_status:"",passed:{true:"通过",false:"不通过"},result:"",waiting:"开始识别人脸",isstart:!1}},mounted:function(){window.$=f.a,this.getAuth()},methods:{start:function(){this.isstart||(this.$refs.camera.value="",this.$refs.camera.click(),this.isstart=!0)},getAuth:function(){var t=this;f.a.ajax({url:"http://13.231.214.207/encry.php",type:"get",success:function(e){t.Authorization=JSON.parse(e).result}})},setwaitingwz:function(){var t=this;this.waiting="正在等待上传",this.result="";var e=0;this.setInterval=setInterval(function(){3===e?(e=0,t.waiting="正在等待上传"):(t.waiting+="..",e++)},1e3)},upload:function(){var t=this,e=this;""!==this.Authorization&&null!==this.formdata&&(this.setwaitingwz(),f.a.ajax({url:"http://13.231.214.207:9000/postdata",type:"post",data:this.formdata,beforeSend:function(t){t.setRequestHeader("Authorization",e.Authorization)},xhrFields:{withCredentials:!1},crossDomain:!0,processData:!1,contentType:!1,success:function(s){clearInterval(t.setInterval),e.waiting="重新开始识别",t.isstart=!1,e.result=s.passed,e.liveness_status=s.liveness_status}}))},handlerUpload:function(t){var e=t.target.files;if(e.length>0){var s=new FormData;s.append("video_file",e[0]),s.append("return_image",!0),s.append("return_status",!0),this.formdata=s,this.upload()}}}},v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"circle",on:{click:t.start}},[t._v(t._s(t.waiting))]),t._v(" "),s("input",{ref:"camera",staticStyle:{display:"none"},attrs:{type:"file",accept:"video/*",capture:"camcorder"},on:{change:function(e){return t.handlerUpload(e)}}}),t._v(" "),""!==t.result?s("p",[t._v("上传结果显示"),s("br"),t._v(t._s(t.passed[t.result]+"："+t.status[t.liveness_status]))]):t._e()])},staticRenderFns:[]};var m=s("VU/8")(w,v,!1,function(t){s("EfDh")},"data-v-0899737a",null).exports;i.a.use(r.a);var _=new r.a({routes:[{path:"/upload",name:"upload",component:m},{path:"/",name:"HelloWorld",component:d}]});i.a.config.productionTip=!1,new i.a({el:"#app",router:_,components:{App:n},template:"<App/>"})},bceb:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.8dff6e0114d903932c57.js.map