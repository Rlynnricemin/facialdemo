webpackJsonp([1],{EfDh:function(t,e){},FNpM:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("7+uW"),n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var s=a("VU/8")({name:"App"},n,!1,function(t){a("FNpM")},null,null).exports,r=a("/ocq"),o={name:"HelloWorld",data:function(){return{bool:!1,videowidth:370}},mounted:function(){window.startFaceinit(this.render)},computed:{marginLeft:function(){return-(this.videowidth-288)/2}},methods:{startVideo:function(){this.bool?window.stopVideo():window.startVideo(),this.bool=!this.bool},render:function(t){this.videowidth=t}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h2",[t._v("Face deformation")]),t._v(" "),a("div",{staticClass:"nohide",attrs:{id:"container"}},[a("div",{staticStyle:{position:"relative"},style:{marginLeft:t.marginLeft+"px"}},[a("video",{ref:"video",attrs:{id:"videoel",width:"370",height:"288",preload:"auto",playsinline:"",autoplay:""}}),t._v(" "),a("canvas",{attrs:{id:"overlay",width:"370",height:"288"}})])]),t._v(" "),a("br"),t._v(" "),a("div",{attrs:{id:"buttons"}},[a("input",{staticClass:"btn",attrs:{type:"button",value:"wait, loading video",disabled:"disabled",id:"startbutton"},on:{click:t.startVideo}})]),t._v(" "),a("p",{attrs:{id:"score"}})])},staticRenderFns:[]};var u=a("VU/8")(o,d,!1,function(t){a("kri/")},"data-v-59382ec5",null).exports,l=a("DWsy"),c=a.n(l),p={name:"HelloWorld",data:function(){return{Authorization:"",formdata:null,status:{ok:"真人",hack:"假造人脸",short_time:"视频时长不足2s",no_face_detected:"视频中未检测到人脸",loss_tracking:"人脸中途出框",face_changed:"视频中途人脸被替换"},liveness_status:"",passed:{true:"通过",false:"不通过"},result:"",waiting:"开始识别人脸",isstart:!1}},mounted:function(){window.$=c.a,this.getAuth()},methods:{start:function(){this.isstart||(this.$refs.camera.value="",this.$refs.camera.click(),this.isstart=!0)},getAuth:function(){var t=this;c.a.ajax({url:"http://13.231.214.207/encry.php",type:"get",success:function(e){t.Authorization=JSON.parse(e).result}})},setwaitingwz:function(){var t=this;this.waiting="正在等待上传",this.result="";var e=0;this.setInterval=setInterval(function(){3===e?(e=0,t.waiting="正在等待上传"):(t.waiting+="..",e++)},1e3)},upload:function(){var t=this,e=this;""!==this.Authorization&&null!==this.formdata&&(this.setwaitingwz(),c.a.ajax({url:"http://13.231.214.207:9000/postdata",type:"post",data:this.formdata,beforeSend:function(t){t.setRequestHeader("Authorization",e.Authorization)},xhrFields:{withCredentials:!1},crossDomain:!0,processData:!1,contentType:!1,success:function(a){clearInterval(t.setInterval),e.waiting="重新开始识别",t.isstart=!1,e.result=a.passed,e.liveness_status=a.liveness_status}}))},handlerUpload:function(t){var e=t.target.files;if(e.length>0){var a=new FormData;a.append("video_file",e[0]),a.append("return_image",!0),a.append("return_status",!0),this.formdata=a,this.upload()}}}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"circle",on:{click:t.start}},[t._v(t._s(t.waiting))]),t._v(" "),a("input",{ref:"camera",staticStyle:{display:"none"},attrs:{type:"file",accept:"video/*",capture:"camcorder"},on:{change:function(e){return t.handlerUpload(e)}}}),t._v(" "),""!==t.result?a("p",[t._v("上传结果显示"),a("br"),t._v(t._s(t.passed[t.result]+"："+t.status[t.liveness_status]))]):t._e()])},staticRenderFns:[]};var v=a("VU/8")(p,h,!1,function(t){a("EfDh")},"data-v-0899737a",null).exports;i.a.use(r.a);var f=new r.a({routes:[{path:"/upload",name:"upload",component:v},{path:"/",name:"HelloWorld",component:u}]});i.a.config.productionTip=!1,new i.a({el:"#app",router:f,components:{App:s},template:"<App/>"})},"kri/":function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.670da73f3a011ffb2d8d.js.map